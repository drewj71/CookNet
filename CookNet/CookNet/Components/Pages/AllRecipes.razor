@using CookNet.Data
@page "/recipes"

<PageTitle>All Recipes</PageTitle>

<div class="allrecipes-container">
    <h3 class="all-recipes-title">All Recipes</h3>

    <hr />

    <div class="filter-options">
        <div class="row">
            <div class="col-md-3">
                <MudInput @bind-Value="searchQuery" Placeholder="Search all recipes" Variant="Variant.Outlined" Style="width: 100%"></MudInput>
            </div>
            <div class="col-md-3">

            </div>
            <div class="col-md-3">

            </div>
            <div class="col-md-3">

            </div>
        </div>
    </div>
</div>

@code {
    // TODO - Display recipes with options to search, or filter by ingredient, CookTime, ethnicity, or category
    private string searchQuery = string.Empty;
    //private PaginatedList<Recipe> filteredRecipes = new PaginatedList<Recipe>();
    private Timer debounceTimer;
    private int pageIndex = 1;
    private int pageSize = 100;

    // private void SearchRecipesDebounced(ChangeEventArgs e)
    // {
    //     searchQuery = e.Value.ToString();
    //     if (debounceTimer != null)
    //     {
    //         debounceTimer.Dispose();
    //     }

    //     debounceTimer = new Timer(async _ =>
    //     {
    //         if (!string.IsNullOrEmpty(searchQuery))
    //         {
    //             //filteredRecipes = await RecipeService.GetPaginatedRecipesBySearchQuery(searchQuery, pageIndex, pageSize);
    //             InvokeAsync(StateHasChanged);
    //         }
    //     }, null, 500, Timeout.Infinite);
    //}
}
